<!DOCTYPE html>
<html>
<head>
    <title>Pico W LED Control</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; padding: 20px; }
        button { padding: 10px 20px; margin: 5px; }
        input[type="range"] { width: 200px; }
    </style>
</head>
<body>
    <h1>Pico W LED Control</h1>
    <div>
        <button id="toggleBtn" onclick="toggleLED()">Turn ON</button>
    </div>
    <div>
        <label>Frequency (0.1-5 Hz): <span id="freqValue">1.0</span></label><br>
        <input type="range" id="freqSlider" min="0.1" max="5" step="0.1" value="1.0" oninput="updateFreq(this.value)">
    </div>

    <script>
        const channelId = "2865722";
        const writeApiKey = "your_write_api_key";  // Replace with your Write API Key
        let isOn = true;

        function toggleLED() {
            isOn = !isOn;
            document.getElementById("toggleBtn").innerText = isOn ? "Turn OFF" : "Turn ON";
            sendToThingSpeak(isOn ? 1 : 0, document.getElementById("freqSlider").value);
        }

        function updateFreq(value) {
            document.getElementById("freqValue").innerText = value;
            sendToThingSpeak(isOn ? 1 : 0, value);
        }

        function sendToThingSpeak(onOff, freq) {
            const url = `https://api.thingspeak.com/update?api_key=${writeApiKey}&field1=${onOff}&field2=${freq}`;
            fetch(url)
                .then(response => response.json())
                .then(data => console.log("Update response:", data))  // Debug output
                .catch(error => console.error("Error:", error));
        }

        // Initialize with default values
        sendToThingSpeak(1, 1.0);
    </script>
</body>
</html>
